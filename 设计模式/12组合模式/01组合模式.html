<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>
    /**
     * 组合模式:
     * 又叫 '部分整体' 模式, 将对象组合成树形结构, 以表示 '部分-整体' 的层次结构.
     * 通过对象的多态性表现, 使得用户对单个对象和组合对象的使用具有一致性.
     *
     * 案例: 文件目录、DOM 文档树
     *
     * 模式特点:
     * 1. 表示 '部分-整体' 的层次结构, 生成 '树叶型' 结构
     * 2. 一直操作性, 树叶对象对外接口保存一致 (操作与数据结构一致)
     * 3. 自上而下的请求流向, 从树对象传递给叶对象
     * 4. 调用顶层对象, 会自执行遍历其下的也对象执行
     */

        // 树对象和叶对象接口统一, 树对象增加一个缓存数组, 存储叶对象. 执行树对象方法时, 将
        // 请求传递给其下叶对象执行
    class CFolder {
        constructor(name) {
            this.name = name;
            this.files = [];
        }

        add(file) {
            this.files.push(file);
        }

        scan() {
            for (let file of this.files) {
                file.scan()
            }
        }
    }

    // 叶对象 - 文件
    class CFile {
        constructor(name) {
            this.name = name;
        }

        add(file){
            throw new Error('文件下面不能再添加文件')
        }
    }
</script>
</body>
</html>
