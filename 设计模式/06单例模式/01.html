<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>
    /**
     * 单例模式:
     *  1. 保证一个类仅有一个实例, 并提供一个访问它的全局访问点
     *  2. 主要解决一个全局使用的类频繁的创建和销毁, 占用内存
     */
    ;// 简单版 单例模式
    const Singleton = function (name) {
        this.name = name;
        this.instance = null;
    }
    Singleton.prototype.getName = function () {
        console.log(this.name);
    }
    Singleton.getInstance = function (name) {
        if (this.instance) return this.instance;
        return this.instance = new Singleton(name);
    }
    const sing1 = Singleton.getInstance('sing1');
    const sing2 = Singleton.getInstance('sing2');
    console.log(sing1, sing2)
    console.log(sing1 === sing2);
    sing1.getName();
    sing2.getName();

    // 透明版 单例模式
    const CreateSingleton = (function () {
        let instance;
        return function (name) {
            if (instance) {
                return instance;
            }
            this.name = name;
            return instance = this;
        }
    })()
    CreateSingleton.prototype.getName = function () {
        console.log(this.name);
    }
</script>
</body>
</html>
