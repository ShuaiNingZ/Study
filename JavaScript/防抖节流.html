<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button>哈哈哈哈</button>
    <script>
      const btn = document.querySelector("button");
      btn.addEventListener(
        "click",
        fangdou(
          function (e, ...arg) {
            console.log(this, e, arg);
          },
          100,
          123123
        )
      );
      document.addEventListener(
        "mousemove",
        jieliu(
          function (e, ...arg) {
            console.log(this, e, arg);
          },
          1000,
          "哈哈哈"
        )
      );

      // 防抖: 在事件触发的最后一次执行
      function fangdou(fn, wait, ...arg) {
        let timer = null;
        return function (e) {
          if (timer) clearTimeout(timer);
          timer = setTimeout(() => {
            fn.call(this, e, ...arg);
          }, wait);
        };
      }

      // 节流: 在触发事件的规定时间间隔内执行一次
      function jieliu(fn, wait, ...arg) {
        let date = new Date();
        return function (e) {
          let now = new Date();
          if (now - date < wait) return;
          fn.call(this, e, ...arg);
          date = new Date();
        };
      }

      // 对象合并
      function mergeObj(obj1, obj2) {
        for (const key in obj2) {
          const element = obj2[key];
          if (obj2[key] !== null && typeof obj2[key] === "object") {
            if (obj1[key] === null) {
              obj[key] = obj2[key];
            } else {
              mergeObj(obj1[key], obj2[key]);
            }
          } else {
            obj1[key] = obj2[key];
          }
        }
        return obj1;
      }

      /*function jieliu(fn, wait, ...arg) {
        let toggle = true;
        return function (e) {
            if (!toggle) return;
            toggle = false;
            setTimeout(() => {
                fn.call(this, e, ...arg)
                toggle = true;
            }, wait);
        }
    }*/

      // 访问 url 的过程
      /**
       * 通过 DNS 获取 IP, 通过 IP 访问到服务器, 建立 TCP 连接,
       * 客户端向服务器发送 http 请求包, 服务器返回响应包, 浏览器拿到响应内容渲染页面
       */

      // 三次握手
      /**
       * 客户端向服务器发送 SYN 包, 并进入 SYN_SEND 状态, 等待服务器确认
       * 服务器收到客户端 SYN 包, 返回 SYN+ACK 包, 并进入 SYN_RECV 状态
       * 客户端向服务器发送 ACK 包, 客户端与服务端进入 ESTABLISHED 状态, 三次握手结束
       */

      // 四次挥手
      /**
       *
       */

      // react 生命周期
      /**
       * 首次渲染
       * constructor
       * static getDerivedStateFromProps
       * render
       * componentDidMount
       * 更新阶段
       * static getDerivedStateFromProps
       * shouldComponentUpdate
       * render
       * getSnapshotBeforeUpdate
       * componentDidUpdate
       * 销毁
       * componentWillUnmount
       */
    </script>
  </body>
</html>
